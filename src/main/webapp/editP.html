<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="poplayer"></div>
<div id="popbox">
    <label>输入原密码：</label>
    <input type="text"  style="display: inline" id="yuan1"/></div></br>
    <label>输入新密码：</label>
    <input type="text"  style="display: inline" id="xin1"/></div></br>
    <label>确认新密码：</label>
    <input type="text"  style="display: inline" id="xin2"/></div></br>
    <button id="confirm" onclick="confirming">确定修改</button>
</div>
<button id="repassword" onclick="repass()">修改密码</button>
<script>
    function repass() {
        $("poplayer").style.display=block;
        $("popbox").style.display=block;
        document.getElementById('uploadfile-button').addEventListener('click', () =>{
        if(document.getElementById("yuan1").value==null||document.getElementById("xin1").value==null||document.getElementById("xin2").value==null){
            alert("不能为空！");
        }
        else if(document.getElementById("xin1").value!=document.getElementById("xin2").value){
            alert("两次密码不匹配！");
        }
        else{
            let newpwd=document.getElementById("xin1").value;
            $.ajax({
                type : 'POST',
                url : "/changepwd",
                dataType:"json",
                //contentType:"application/json;charset=UTF-8",
                data:{'newpwd':JSON.stringify(notodata)},


                success : function(data) {
                    if(data.state==1){
                        zTreeObj = $.fn.zTree.destroy("treeDemo");
                        gtree();

                    }
                }
            })
        }

    });}

</script>
</body>
</html>